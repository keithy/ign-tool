systemd:
  units:
    - name: install-overlayed-rpms.service
      #
      # Adding overlays to rpm-ostree is risky due to the push model used for providing server updates.
      # Upstream testing will not have been performed on your specific combination of packages
      # Mitigate this risk by having some servers running on the 'next' stream so you know whats coming. 
      #
      enabled: true
      contents: |
        [Unit]
        Description=Install Overlay Packages
        ConditionFirstBoot=yes
        Wants=network-online.target
        After=network-online.target
        After=multi-user.target
        Before=boot-complete.target
        [Service]
        Type=oneshot
        #ExecStart=rpm-ostree override remove python3-libs vim-minimal
        ExecStart=rpm-ostree install nano htop 
        # An alternative to --reboot
        ExecStartPost=rpm-ostree ex livefs --i-like-danger
        [Install]
        WantedBy=multi-user.target
        RequiredBy=boot-complete.target